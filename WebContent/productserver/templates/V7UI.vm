<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html debug="true">
	<head>
		<title>$las_config.getTitle()</title>
		<!--<script type="text/javascript" src="JavaScript/components/BrowserSniff.js" ></script>		-->
		<script type="text/javascript" src="JavaScript/components/xmldom.js" ></script>
		<script type="text/javascript" src="JavaScript/components/LASRequest.js" ></script>
		<script type="text/javascript" src="JavaScript/components/LASGetGridResponse.js" ></script>
		<script type="text/javascript" src="JavaScript/components/LASGetCategoriesResponse.js" ></script>
		<script type="text/javascript" src="JavaScript/components/LASGetDataConstraintsResponse.js" ></script>
		<script type="text/javascript" src="JavaScript/components/LASGetViewsResponse.js" ></script>
		<script type="text/javascript" src="JavaScript/components/LASGetOperationsResponse.js" ></script>
		<script type="text/javascript" src="JavaScript/components/LASGetOptionsResponse.js" ></script>
		<script type="text/javascript" src="JavaScript/components/MapWidget.js" ></script>
		<script type="text/javascript" src="JavaScript/components/querystring.js" ></script>
		<script  type="text/javascript" src="JavaScript/components/DateWidget.js" ></script>
		<script  type="text/javascript" src="JavaScript/components/MenuWidget.js" ></script>
		<script type="text/javascript" src="JavaScript/frameworks/json/json2.js" ></script>
		<script type="text/javascript" src="JavaScript/ui/LASUI.js" ></script>
		<script type="text/javascript">
			var LAS = new LASUI();
			LAS.products = {
				"Maps" : {
					"Latitude-Longitude" : {"view" : "xy", "class" : "visualization", "id" : "XY_zoomable_image", "optiondef" : "Options_2D_image_contour_xy"}
				},
				"Line Plots" : {
					"Time series" : {"view" : "t", "class" : "visualization", "id" : "Plot_1D", "optiondef" : "Options_1D"},
					"Longitude" : {"view" : "x", "class" : "visualization", "id" : "Plot_1D", "optiondef" : "Options_1D"},
					"Latitude" : {"view" : "y", "class" : "visualization", "id" : "Plot_1D", "optiondef" : "Options_1D"},
					"Depth" : {"view" : "z", "class" : "visualization", "id" : "Plot_1D", "optiondef" : "Options_1D"}
				},
				"Vertical Section Plots" : {
					"Longitude-depth" : {"view" : "xz", "class" : "visualization", "id" : "Plot_2D", "optiondef" : "Options_2D_image_contour"},
					"Latitude-depth" : {"view" : "yz", "class" : "visualization", "id" : "Plot_2D", "optiondef" : "Options_2D_image_contour"}										
				},
				"Hofmuller Plots" : {
					"Longitude-time" : {"view" : "xt", "class" : "visualization", "id" : "Plot_2D", "optiondef" : "Options_2D_image_contour"},
					"Latitude-time" : {"view" : "yt", "class" : "visualization", "id" : "Plot_2D", "optiondef" : "Options_2D_image_contour"},
					"Depth-time" : {"view" : "zt", "class" : "visualization", "id" : "Plot_2D", "optiondef" : "Options_2D_image_contour"}													
				},
				"Point Data" : {"Single Value" : {"view" : "","class" : "visualization", "id" : "Data_Extract", "optiondef" : "Options_Data"}},
				"Download Data" : {
					"Table of values" : {"view" : "xyzt", "class" : "download", "id" : "Data_Extract", "optiondef" : "Options_Data"},
					"ARC GIS" : {"view" : "xy", "class" : "download", "id" : "Data_Extract_ArcView", "optiondef" : ""},
					"ASCII File" : {"view" : "xyzt", "class" : "download", "id" : "Data_Extract_File", "optiondef" : "Options_Data_file"},
					"netCDF File" : {"view" : "xyzt", "class" : "download", "id" : "Data_Extract_netCDF", "optiondef" : "Options_Data"},
					"Scripts" : {"view" : "xyzt", "class" : "download", "id" : "Gen_Scripts", "optiondef" : "Options_gen_script"}	
					
				}
			};
			LAS.params = {
#if ($request.getParameter('state')!="")
				'state' : $request.getParameter('state'),
#end

#if ($request.getParameter('catid')!="") 
				'catid' :$request.getParameter('catid'),
#else
				'catid' : {},
#end
#if  ($request.getParameter("dsid")!="")
				'dsid' : '$request.getParameter("dsid")',
#else
				'dsid' : '',
#end
#if  ($request.getParameter("varid")!="")
				'varid' : '$request.getParameter("varid")',
#else
				'varid' : [],
#end
				'view' : "$request.getParameter('view')",
				'plot' : "$request.getParameter('plot')",
#if ($request.getParameter('x')!="")
				'x' : $request.getParameter('x'),		
#end
#if ($request.getParameter('y')!="")
				'y' : $request.getParameter('y'),		
#end
#if ($request.getParameter('viewx')!="")
				'viewx' : $request.getParameter('viewx'),		
#end
#if ($request.getParameter('y')!="")
				'viewy' : $request.getParameter('viewy'),		
#end
#if ($request.getParameter('z')!="")
				'z' : $request.getParameter('z'),		
#end
#if ($request.getParameter('t')!="")
				't' : $request.getParameter('t'),		
#end
#if ($request.getParameter('auto'))
				'autoupdate' : true,		
#else
				'autoupdate' : false,	
#end
#if ($request.getParameter('options')!="")
				'options' : $request.getParameter('options')checkbox
#else
				'options' :{}				
#end
		}
		function init () {
			
			
			LAS.initUI();		
		}
		</script>
		<style media="all" type="text/css">
			@import "JavaScript/ui/LASUI.css";
		</style>
	</head>
	<body onload="init()">
		#parse ("/productserver/templates/V7UIHeader.vm")
		<div style="display:none" class="LASPopupDIVNode" id="categories"></div>
		<div style="display:none" class="LASPopupDIVNode" id="plotOptions"></div>
		<span>
		#if ($request.getParameter('hideCat'))
		#else
			<INPUT class="LASProductButton" width="100%" value="Choose dataset & variable" type="button" onclick="if(document.getElementById('categories').style.display=='none'){document.getElementById('categories').style.display='';LAS.toggleUIMask('')} else {document.getElementById('categories').style.display='none'; LAS.toggleUIMask('none');}">
				
		#end	
			<!--<INPUT class="LASProductButton" width="100%" value="Choose comparison variable" type="button" onclick="if(document.getElementById('comparison').style.display=='none'){document.getElementById('categories').style.display='';LAS.toggleUIMask('')} else {document.getElementById('categories').style.display='none'; LAS.toggleUIMask('none');}">-->
			<span  class="LASProductButton" style="font-size:0.9em;cursor:default;padding:4px;border-bottom:1pt solid grey;border-right:1pt solid grey;border-top:1pt solid #F8F8FF;border-left:1pt solid #F8F8FF;" id="update" onclick="LAS.makeRequest();">Update Plot <INPUT type="checkbox" #if($request.getParameter('auto')) checked #end style="position:relative;top:2px;" onmousemove="window.status='Check to automatically update the plot.';" onmouseout="window.status='';" onclick="LAS.autoupdate=this.checked;if(LAS.autoupdate)LAS.makeRequest();"></span>
			<INPUT class="LASProductButton" width="100%" value="Set plot options" type="button" onclick="LAS.toggleUIMask('');document.getElementById('plotOptions').style.display='';">
		</span>		
		<span id="productButtons">
			<INPUT class="LASProductButton" width="100%" disabled="true" ID="Animation" value="Animate" type="button">
			<INPUT class="LASProductButton" width="100%" disabled="true" ID="Comparison" value="Compare" type="button">							
			<INPUT class="LASProductButton" width="100%" disabled="true" ID="Plot to Google Earth" value="Google Earth" type="button">
			<INPUT class="LASProductButton" width="100%" disabled="true" ID="Table of values (text)" value="Show Values" type="button">
		</span>
		<br>
#if ($request.getParameter('hideCon'))
		<a id ="showC" class="LASLink" style="float:right;" alt="Show the plot controls pane" onmouseover="window.status='Hide the constraints pane';" onmouseout="window.status=''"   style="display:none;cursor:pointer;float:right;"  onclick="document.getElementById('constraints').style.display='';this.style.display='none';LAS.refs.XYSelect.rubberBand.style.display='';LAS.refs.XYSelect.rubberBand_c.style.display='';LAS.refs.XYSelect.updatePixelExtents();"><b>Show constraints</b></a>
#else
		<a id ="showC" class="LASLink" style="display:none;float:right;" alt="Show the plot controls pane" onmouseover="window.status='Hide the constraints pane';" onmouseout="window.status=''"   style="display:none;cursor:pointer;float:right;"  onclick="document.getElementById('constraints').style.display='';this.style.display='none';LAS.refs.XYSelect.rubberBand.style.display='';LAS.refs.XYSelect.rubberBand_c.style.display='';LAS.refs.XYSelect.updatePixelExtents();"><b>Show constraints</b></a>
#end
		<span id="breadcrumb">Please select a variable.</span>
#if ($request.getParameter('hideCon'))
		<div id="constraints" style="width:100%;  display:none; border: 1px solid #99cccc">
#else
		<div id="constraints" style="width:100%; border: 1px solid #99cccc">
#end
			<table width="100%" height="180" border=0 cellspacing=0>
				<tbody><tr>
					<td width="23px" valign="top"><img id="wait" style="visibility:hidden;" src="JavaScript/components/mozilla_blu.gif">&nbsp;</td>
					<td width="150px" class="LASPlotTypeContainer" align="left" valign="center">
						<div id="plotType"></div>
						<div id="downloadType"></div>
					</td>
					<td class="LASZTContainer" align="center" style="width:400px;padding:3pt;"><div id="XYZTControls" style="display:none;">
						<div id="Date"></div>
						<div id="Depth"></div>
						<div id="DataConstraints"></div>
						<br>
						<strong>Analysis Mode : </strong><a class="LASLink" value=false onclick="if(!LAS.refs.analysis.enabled){LAS.showAnalysis();this.innerHTML='ON';}else{LAS.hideAnalysis();this.innerHTML='OFF';}">OFF</a>						
						<div id="analysis" style="display:none;">
							<select id="analysis_op" name="analysis_op">
								<option selected="" value="">Select Analysis</option>
								<option value="ave">Average</option>
								<option value="min">Minimum</option>
								<option value="max">Maximum</option>
								<option value="sum">Sum</option>
								<option value="var">Variance</option>
							</select> across 						
							<select id="analysis_axes">
									<option value="">Region Type</option>
									<option id="xy_analysis" value="xy">Area</option>
									<option id="x_analysis" value="x">Longitude</option>
	 	          						<option id="y_analysis" value="y">Latitude</option>
									<option id="z_analysis" value="z">Depth</option>
	 	 	          					<option id="t_analysis" value="t">Time</option>
							</select>
							<!--<strong>Mask : </strong>
								  <b>None</b><input name="mask" checked="checked" value="n" type="radio">
							          <b>Ocean</b><input name="mask" value="o" type="radio">
							          <b>Land</b><input name="mask" value="l" type="radio">
							-->
						</div></div>
					</td>
					<td width="400px" align=right border=0>
						<table id="map"><tbody>
							<tr><td></td><td align="center"><strong>Max Lat : </strong><input size=3  id="input_maxY" type="text" value="90.0"><b onmousedown="LAS.refs.XYSelect.panPlot(0,10);" class="LASLink">&uarr;</b></td><td></td></tr>
							<tr><td align="right"><strong>Min<br><b onmousedown="LAS.refs.XYSelect.panPlot(-20,0);" class="LASLink">&larr;</b> Lon<br></strong><input size=6 id="input_minX" value="-180.0"><br><a  class="LASLink" onclick="LAS.refs.XYSelect.zoom(2);">ZOOM IN</a></td><td><div id="MapWidget" style="border:1px solid black;" ></div><td align="left"><strong>Max<br>Lon <b onmousedown="LAS.refs.XYSelect.panPlot(20,0);" class="LASLink">&rarr;</b></strong><br><input value="180.0" size=6 id="input_maxX"><br><a class="LASLink" onclick="LAS.refs.XYSelect.zoom(-1)">ZOOM OUT</a></td></tr>
							<tr><td></td><td align="center"><strong>Min Lat : </strong><input id="input_minY" size=3 type="text" value="-90.0"><b onmousedown="LAS.refs.XYSelect.panPlot(0,-10);" class="LASLink">&darr;</b></td><td></td></tr>
						</tbody></table>
					</td><td>
					<td valign="bottom" halign="right" width="10px"><a class="LASLink" style="text-align:bottom;" alt="Hide the plot controls pane" onmouseover="window.status='Hide the plot constrols pane';" onmouseout="window.status=''"  id="hideC"  onclick="document.getElementById('constraints').style.display='none';LAS.refs.XYSelect.rubberBand.style.display='none';LAS.refs.XYSelect.rubberBand_c.style.display='none';document.getElementById('showC').style.display='';">hide</a></td>
				</tr></tbody>
			</table>
		</div>
		<div  style="width:100%;height:600px;border: 1px solid #99cccc;padding-top:2px;">
			<div style="display:none;margin:20pt;padding:20pt;" id="wait_msg"><H3>Product loading...</H3></div>
			<iframe id="output" width="100%" height="100%" frameborder=0></iframe>			
		</div>
		#parse( "/productserver/templates/V7UIFooter.vm") 
		<div id="debug" style="border:1pt solid black;position:absolute;top:200px;left:150px;display:none;"></div>
		<div id="plotOptions" style="border:1pt solid #99cccc;background-color:white;z-index:6;position:absolute;top:200px;left:150px;display:none;"></div>
		<div id="downloadOptions" style="border:1pt solid #99cccc;background-color:white;z-index:6;position:absolute;top:200px;left:150px;display:none;"></div>
		<div id="externalOptions" style="border:1pt solid #99cccc;background-color:white;z-index:6;position:absolute;top:200px;left:150px;display:none;"></div>
	</body>
</html>



